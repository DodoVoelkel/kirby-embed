(function () {var b={};Object.defineProperty(b,"__esModule",{value:!0});var a={extends:"k-url-field",data:function(){return{media:Object}},created:function(){this.value.media&&this.hasLength(this.value.media)&&(this.media=this.value.media)},computed:{hasMedia:function(){return this.hasLength(this.media)&&this.media.code},inputValue:function(){return this.value.input}},methods:{setMedia:function(e){this.media=e},hasLength:function(e){return Object.keys(e).length}}};b.default=a;if(typeof a==="function"){a=a.options}Object.assign(a,function(){var render=function(){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c("k-field",_vm._b({staticClass:"k-oembed-field k-url-field k-field",attrs:{"input":_vm._uid}},"k-field",_vm.$props,false),[_vm.hasMedia?_c("div",{staticClass:"preview"},[_c("div",{staticClass:"preview-content",domProps:{"innerHTML":_vm._s(_vm.media.code)}}),_vm._v(" "),_c("div",{staticClass:"preview-background"})]):_vm._e(),_vm._v(" "),_c("k-input",_vm._g(_vm._b({ref:"input",attrs:{"id":_vm._uid,"value":_vm.inputValue,"theme":"field"},on:{"setMedia":_vm.setMedia}},"k-input",_vm.$props,false),_vm.$listeners),[_vm.link?_c("k-button",{staticClass:"k-input-icon-button",attrs:{"slot":"icon","icon":_vm.icon,"link":_vm.inputValue,"tooltip":_vm.$t("open"),"tabindex":"-1","target":"_blank","rel":"noopener"},slot:"icon"}):_vm._e()],1)],1)};var staticRenderFns=[];return{render:render,staticRenderFns:staticRenderFns,_compiled:true,_scopeId:null,functional:undefined}}());var c={};Object.defineProperty(c,"__esModule",{value:!0});var d={extends:"k-url-input",methods:{onInput:function(t){var e=this;this.isUrl(t)&&this.$api.get("kirby-oembed/get-data",{url:t}).then(function(i){"success"==i.status&&i.data?e.media=i.data:e.media={},e.emitInput(t)}).catch(function(i){e.media={},e.emitInput(t)})},emitInput:function(t){this.$emit("input",{input:t||"",media:this.media}),this.$emit("setMedia",this.media)},isUrl:function(t){var e=new RegExp(/^(?:http(s)?:\/\/)?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:\/?#[\]@!\$&'\(\)\*\+,;=.]+$/g);return!t||t.match(e)}}};c.default=d;if(typeof d==="function"){d=d.options}var f=e(b),g=e(c);function e(e){return e&&e.__esModule?e:{default:e}}panel.plugin("sylvainjule/oembed",{fields:{oembed:f.default},components:{"k-oembed-input":g.default}});})();