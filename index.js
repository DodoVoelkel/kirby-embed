(function () {var a={extends:"k-url-field",data:function(){return{media:Object,loading:!1}},created:function(){this.value&&this.value.media&&this.hasLength(this.value.media)&&(this.media=this.value.media)},computed:{hasMedia:function(){return this.hasLength(this.media)},syncFailed:function(){return""!=this.inputValue&&!this.hasMedia},inputValue:function(){return this.value&&this.value.input?this.value.input:""}},methods:{setMedia:function(t){this.media=t,this.stopLoading()},hasLength:function(t){return Object.keys(t).length},startLoading:function(){this.loading=!0},stopLoading:function(){this.loading=!1}}};if(typeof a==="function"){a=a.options}Object.assign(a,function(){var render=function(){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c("k-field",_vm._b({staticClass:"k-oembed-field k-url-field k-field",attrs:{"input":_vm._uid}},"k-field",_vm.$props,false),[_vm.hasMedia?_c("div",{staticClass:"preview"},[_c("div",{staticClass:"preview-content",domProps:{"innerHTML":_vm._s(_vm.media.code)}}),_vm._v(" "),_c("div",{staticClass:"preview-background"})]):_vm._e(),_vm._v(" "),_c("k-input",_vm._g(_vm._b({ref:"input",attrs:{"id":_vm._uid,"value":_vm.inputValue,"theme":"field"},on:{"setMedia":_vm.setMedia,"startLoading":_vm.startLoading}},"k-input",_vm.$props,false),_vm.$listeners),[_c("div",{staticClass:"k-embed-infos",attrs:{"slot":"icon"},slot:"icon"},[_c("div",{staticClass:"k-embed-status"},[_vm.loading?_c("span",{staticClass:"k-embed-status-loading"},[_c("span",{staticClass:"loader"})]):_vm.hasMedia?_c("span",{staticClass:"k-embed-status-synced"},[_vm._v("Synced "),_c("span",{staticClass:"checkmark"})]):_vm.syncFailed?_c("span",{staticClass:"k-embed-status-failed"},[_vm._v("Sync failed "),_c("span",{staticClass:"cross"})]):_vm._e()]),_vm._v(" "),_vm.link?_c("k-button",{staticClass:"k-input-icon-button",attrs:{"icon":_vm.icon,"link":_vm.inputValue,"tooltip":_vm.$t("open"),"tabindex":"-1","target":"_blank","rel":"noopener"}}):_vm._e()],1)])],1)};var staticRenderFns=[];return{render:render,staticRenderFns:staticRenderFns,_compiled:true,_scopeId:null,functional:undefined}}());var b={extends:"k-url-input",methods:{onInput:function(t){var e=this;this.$emit("startLoading"),this.$api.get("kirby-oembed/get-data",{url:t}).then(function(i){"success"==i.status&&i.data?e.media=i.data:e.media={},e.emitInput(t)}).catch(function(i){e.media={},e.emitInput(t)})},emitInput:function(t){this.$emit("input",{input:t,media:this.media}),this.$emit("setMedia",this.media),this.$forceUpdate()}}};if(typeof b==="function"){b=b.options}panel.plugin("sylvainjule/oembed",{fields:{oembed:a},components:{"k-oembed-input":b}});})();